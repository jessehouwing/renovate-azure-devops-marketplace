{
    "id": "E228B066-B4AA-4EEE-B27D-2E17C4A206FA",
    "name": "compileReleaseNotes",
    "friendlyName": "Compile Release Notes 2",
    "description": "Compiles Relase Notes",
    "author": "Agile Extensions",
    "category": "Utility",
    "visibility": ["Build", "Release"],
    "version": {
        "Major": 0,
        "Minor": 0,
        "Patch": 7
    },
    "instanceNameFormat": "Compile Release Notes",
    "groups": [
        {
            "name": "advanced",
            "displayName": "Advanced",
            "isExpanded": false
        }
    ],
    "inputs": [
        {
            "name": "queryId",
            "type": "querycontrol",
            "label": "Query",
            "defaultValue": "",
            "required": "true",
            "helpMarkDown": "Select a saved work query to execute."
        },
        {
            "name": "maxThreshold",
            "type": "string",
            "label": "Upper threshold",
            "defaultValue": "0",
            "required": "true",
            "properties": {
                "isVariableOrNonNegativeNumber": "true"
            },
            "helpMarkDown":
                "The maximum number of matching workitems from the query."
        },
        {
            "name": "minThreshold",
            "type": "string",
            "label": "Lower threshold",
            "defaultValue": "0",
            "required": "true",
            "properties": {
                "isVariableOrNonNegativeNumber": "true"
            },
            "groupName": "advanced",
            "helpMarkDown":
                "The minimum number of matching workitems from the query."
        }
    ],

    "execution": {
        "HttpRequest": {
            "Execute": {
                "EndpointId": "",
                "EndpointUrl":
                    "$(system.teamFoundationCollectionUri)$(system.teamProjectId)/_apis/wit/wiql/$(queryId)?api-version=3.1",
                "Method": "GET",
                "Body": "",
                "Headers":
                    "{\n\"Content-Type\":\"application/json\"\n, \"Authorization\":\"Bearer $(system.accesstoken)\"\n}",
                "WaitForCompletion": "false",
                "Expression":
                    "and(le(count(root['workItems']), $(maxThreshold)), ge(count(root['workItems']), $(minThreshold)))"
            }
        }
    }
}
